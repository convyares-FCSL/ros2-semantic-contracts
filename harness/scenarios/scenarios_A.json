{
    "version": "0.1",
    "group": "A",
    "description": "Skeleton scenarios generated from traceability.md (grouped, keyed by scenario id).",
    "scenarios": {
        "A01_no_ghosts_after_rejection": {
            "spec_id": "A01",
            "title": "No ghosts after rejection",
            "layer": "Core",
            "requires": [
                "actions.basic"
            ],
            "notes": "If a goal is rejected, no status/feedback/result events may reference it. Validates SPEC_AC01 (no-ghosts aspect). UUID uniqueness is infrastructure-provided.",
            "boundary": {
                "sut": "client",
                "peer": "external",
                "peer_rule": "Action server must be provided by the scenario environment. Backend must not host or configure server accept/reject policy."
            },
            "ops": [
                {
                    "op": "send_goal",
                    "goal_id": "g_reject",
                    "payload": {
                        "mode": "reject"
                    }
                },
                {
                    "op": "wait",
                    "ms": 10
                }
            ],
            "expects": [
                {
                    "check": "custom",
                    "params": {
                        "must_observe": [
                            {
                                "type": "op_start",
                                "detail": {
                                    "op": "send_goal"
                                }
                            },
                            {
                                "type": "goal_send_decision",
                                "goal_id": "g_reject",
                                "accepted": false
                            }
                        ]
                    }
                },
                {
                    "check": "absent",
                    "params": {
                        "where": {
                            "goal_id": "g_reject"
                        },
                        "types": [
                            "status",
                            "result"
                        ]
                    }
                }
            ]
        },
        "A02_terminal_immutable": {
            "spec_id": "A02",
            "title": "Terminal state is immutable",
            "layer": "Core",
            "requires": [
                "actions.basic"
            ],
            "notes": "Once terminal is set, subsequent attempts to change terminal must be denied and observable; terminal must not change.",
            "boundary": {
                "sut": "client",
                "peer": "external",
                "peer_rule": "Action server must be provided by the scenario environment. Backend must not host or configure server accept/reject policy."
            },
            "ops": [
                {
                    "op": "send_goal",
                    "goal_id": "g1",
                    "payload": {
                        "mode": "succeed_abort"
                    }
                },
                {
                    "op": "wait",
                    "ms": 200
                },
                {
                    "op": "wait",
                    "ms": 500
                }
            ],
            "expects": [
                {
                    "check": "custom",
                    "params": {
                        "must_observe": [
                            {
                                "type": "goal_send_decision",
                                "goal_id": "g1",
                                "accepted": true
                            },
                            {
                                "type": "result",
                                "goal_id": "g1",
                                "status": "SUCCEEDED"
                            }
                        ]
                    }
                },
                {
                    "check": "absent",
                    "params": {
                        "where": {
                            "type": "result",
                            "goal_id": "g1",
                            "status": "ABORTED"
                        },
                        "types": [
                            "result"
                        ]
                    }
                }
            ]
        },
        "A03_unknown_not_persistent": {
            "spec_id": "A03",
            "title": "Unknown not persistent",
            "layer": "Core",
            "ops": [],
            "expects": [],
            "notes": "Populate ops/observations to validate this clause (Layer=Core).",
            "boundary": {
                "sut": "client",
                "peer": "external",
                "peer_rule": "Action server must be provided by the scenario environment. Backend must not host or configure server accept/reject policy."
            }
        },
        "A04_valid_transitions": {
            "spec_id": "A04",
            "title": "Valid transitions only",
            "layer": "Core",
            "ops": [],
            "expects": [],
            "notes": "Populate ops/observations to validate this clause (Layer=Core).",
            "boundary": {
                "sut": "client",
                "peer": "external",
                "peer_rule": "Action server must be provided by the scenario environment. Backend must not host or configure server accept/reject policy."
            }
        },
        "A05_invalid_transitions_rejected": {
            "spec_id": "A05",
            "title": "Invalid transitions rejected",
            "layer": "Core",
            "ops": [],
            "expects": [],
            "notes": "Populate ops/observations to validate this clause (Layer=Core).",
            "boundary": {
                "sut": "client",
                "peer": "external",
                "peer_rule": "Action server must be provided by the scenario environment. Backend must not host or configure server accept/reject policy."
            }
        },
        "A06_status_updates_monotonic": {
            "spec_id": "A06",
            "title": "Status updates monotonic",
            "layer": "Core",
            "ops": [],
            "expects": [],
            "notes": "Populate ops/observations to validate this clause (Layer=Core).",
            "boundary": {
                "sut": "client",
                "peer": "external",
                "peer_rule": "Action server must be provided by the scenario environment. Backend must not host or configure server accept/reject policy."
            }
        },
        "A07_ordering_time_independent": {
            "spec_id": "A07",
            "title": "Event ordering determined by sequence, not wall-clock time",
            "layer": "Core",
            "ops": [],
            "expects": [],
            "notes": "Populate ops/observations to validate this clause (Layer=Core).",
            "boundary": {
                "sut": "client",
                "peer": "external",
                "peer_rule": "Action server must be provided by the scenario environment. Backend must not host or configure server accept/reject policy."
            }
        },
        "A08_cancel_intent_observable": {
            "spec_id": "A08",
            "title": "Cancellation intent observable",
            "layer": "Core",
            "ops": [],
            "expects": [],
            "notes": "Populate ops/observations to validate this clause (Layer=Core).",
            "boundary": {
                "sut": "client",
                "peer": "external",
                "peer_rule": "Action server must be provided by the scenario environment. Backend must not host or configure server accept/reject policy."
            }
        },
        "A09_cancel_resolution_policy": {
            "spec_id": "A09",
            "title": "Cancel resolution policy-defined",
            "layer": "Core",
            "ops": [],
            "expects": [],
            "notes": "Populate ops/observations to validate this clause (Layer=Core).",
            "boundary": {
                "sut": "client",
                "peer": "external",
                "peer_rule": "Action server must be provided by the scenario environment. Backend must not host or configure server accept/reject policy."
            }
        },
        "A10_result_visible_after_terminal": {
            "spec_id": "A10",
            "title": "Result visible after terminal",
            "layer": "Core",
            "ops": [],
            "expects": [],
            "notes": "Populate ops/observations to validate this clause (Layer=Core).",
            "boundary": {
                "sut": "client",
                "peer": "external",
                "peer_rule": "Action server must be provided by the scenario environment. Backend must not host or configure server accept/reject policy."
            }
        },
        "A11_single_terminal_result": {
            "spec_id": "A11",
            "title": "Single terminal result",
            "layer": "Core",
            "ops": [],
            "expects": [],
            "notes": "Populate ops/observations to validate this clause (Layer=Core).",
            "boundary": {
                "sut": "client",
                "peer": "external",
                "peer_rule": "Action server must be provided by the scenario environment. Backend must not host or configure server accept/reject policy."
            }
        },
        "A12_supersession_cancelled": {
            "spec_id": "A12",
            "title": "Supersession via CANCELED",
            "layer": "Policy",
            "ops": [],
            "expects": [],
            "notes": "Populate ops/observations to validate this clause (Layer=Policy).",
            "boundary": {
                "sut": "client",
                "peer": "external",
                "peer_rule": "Action server must be provided by the scenario environment. Backend must not host or configure server accept/reject policy."
            }
        },
        "A13_result_retention": {
            "spec_id": "A13",
            "title": "Result retention non-zero",
            "layer": "Policy",
            "ops": [],
            "expects": [],
            "notes": "Populate ops/observations to validate this clause (Layer=Policy).",
            "boundary": {
                "sut": "client",
                "peer": "external",
                "peer_rule": "Action server must be provided by the scenario environment. Backend must not host or configure server accept/reject policy."
            }
        },
        "A14_tooling_compatibility": {
            "spec_id": "A14",
            "title": "Tooling compatibility",
            "layer": "Tooling",
            "ops": [],
            "expects": [],
            "notes": "Populate ops/observations to validate this clause (Layer=Tooling).",
            "boundary": {
                "sut": "client",
                "peer": "external",
                "peer_rule": "Action server must be provided by the scenario environment. Backend must not host or configure server accept/reject policy."
            }
        },
        "A15_no_goal_id_reuse": {
            "spec_id": "A15",
            "title": "No Goal ID Reuse",
            "layer": "Core",
            "ops": [],
            "expects": [],
            "notes": "Populate ops/observations to validate this clause (Layer=Core).",
            "boundary": {
                "sut": "client",
                "peer": "external",
                "peer_rule": "Action server must be provided by the scenario environment. Backend must not host or configure server accept/reject policy."
            }
        },
        "A16_action_interface_conformity": {
            "spec_id": "A16",
            "title": "Action Interface Conformity",
            "layer": "Global",
            "requires": [
                "graph.observe"
            ],
            "ops": [],
            "expects": [],
            "notes": "Interface introspection scenario. Validate action services/topics exist.",
            "boundary": {
                "sut": "client",
                "peer": "external",
                "peer_rule": "Action server must be provided by the scenario environment. Backend must not host or configure server accept/reject policy."
            }
        },
        "A17_abandoned_goal_cleanup": {
            "spec_id": "A17",
            "title": "Abandoned Goal Cleanup",
            "layer": "System",
            "ops": [],
            "expects": [],
            "notes": "Populate ops/observations to validate this clause (Layer=System).",
            "boundary": {
                "sut": "client",
                "peer": "external",
                "peer_rule": "Action server must be provided by the scenario environment. Backend must not host or configure server accept/reject policy."
            }
        }
    }
}